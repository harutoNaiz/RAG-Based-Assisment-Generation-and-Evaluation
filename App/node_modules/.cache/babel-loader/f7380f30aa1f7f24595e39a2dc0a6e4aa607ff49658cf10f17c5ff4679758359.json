{"ast":null,"code":"var _jsxFileName = \"/home/pes2ug22cs632/gen_ai/App/src/takeTest.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { AlertCircle, ChevronRight, Clock, CheckCircle } from 'lucide-react';\nimport Papa from 'papaparse';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TakeTest = () => {\n  _s();\n  const navigate = useNavigate();\n  const chapter = localStorage.getItem('currentChapter');\n  const userEmail = localStorage.getItem('userEmail');\n\n  // State management\n  const [questions, setQuestions] = useState([]);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [selectedOption, setSelectedOption] = useState('');\n  const [timeLeft, setTimeLeft] = useState(60 * 60); // 60 minutes in seconds\n  const [loading, setLoading] = useState(true);\n  const [showConfirmEndModal, setShowConfirmEndModal] = useState(false);\n  const [userAnswers, setUserAnswers] = useState([]);\n  const [testCompleted, setTestCompleted] = useState(false);\n  const [analytics, setAnalytics] = useState({\n    score: 0,\n    totalScore: 0,\n    wrongQuestions: [],\n    strongTopics: [],\n    weakTopics: [],\n    difficultyStats: {\n      easy: 0,\n      medium: 0,\n      hard: 0\n    },\n    totalByDifficulty: {\n      easy: 0,\n      medium: 0,\n      hard: 0\n    }\n  });\n\n  // Format time as MM:SS\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // Load questions from CSV\n  useEffect(() => {\n    const loadQuestions = async () => {\n      try {\n        // http://localhost:5000/static/generated_tests/output_${chapter}.csv\n        // const response = await fetch(`http://localhost:5000/serve`);\n\n        const response = await fetch(`http://localhost:5000/serve?filename=output_${chapter}.csv`);\n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n        const csvText = await response.text();\n        console.log(`Attempting to fetch: http://localhost:5000/serve?filename=output_${chapter}.csv`);\n        Papa.parse(csvText, {\n          header: true,\n          complete: results => {\n            // Shuffle questions for random order\n            const shuffledQuestions = results.data.filter(q => q.Question && q.Question.trim() !== '') // Filter out empty questions\n            .sort(() => Math.random() - 0.5);\n            setQuestions(shuffledQuestions);\n            setUserAnswers(new Array(shuffledQuestions.length).fill(null));\n            setLoading(false);\n          },\n          error: error => {\n            console.error('Error parsing CSV:', error);\n            alert('Failed to load test questions. Please try again.');\n            navigate('/');\n          }\n        });\n      } catch (error) {\n        console.error('Error loading questions:', error);\n        alert('Failed to load test questions. Please try again.');\n        navigate('/');\n      }\n    };\n    if (chapter) {\n      loadQuestions();\n    } else {\n      alert('Missing chapter information');\n      navigate('/');\n    }\n  }, [chapter, navigate]);\n\n  // Timer logic\n  useEffect(() => {\n    if (loading || testCompleted) return;\n    const timer = setInterval(() => {\n      setTimeLeft(prev => {\n        if (prev <= 1) {\n          clearInterval(timer);\n          handleEndTest(true); // Auto-submit when time runs out\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [loading, testCompleted]);\n\n  // Handle answer selection\n  const handleOptionSelect = option => {\n    setSelectedOption(option);\n\n    // Update user answers array\n    const newAnswers = [...userAnswers];\n    newAnswers[currentQuestionIndex] = option;\n    setUserAnswers(newAnswers);\n  };\n\n  // Go to the next question\n  const handleNextQuestion = () => {\n    if (currentQuestionIndex < questions.length - 1) {\n      setCurrentQuestionIndex(prevIndex => prevIndex + 1);\n      setSelectedOption(userAnswers[currentQuestionIndex + 1] || '');\n    } else {\n      setShowConfirmEndModal(true);\n    }\n  };\n\n  // Calculate test results\n  const calculateResults = useCallback(() => {\n    const results = {\n      score: 0,\n      totalScore: 0,\n      wrongQuestions: [],\n      strongTopics: {},\n      weakTopics: {},\n      difficultyStats: {\n        easy: 0,\n        medium: 0,\n        hard: 0\n      },\n      totalByDifficulty: {\n        easy: 0,\n        medium: 0,\n        hard: 0\n      }\n    };\n    questions.forEach((question, index) => {\n      var _question$Difficulty, _Object$entries$find, _Object$entries$find$;\n      const userAnswer = userAnswers[index];\n      const correctAnswerText = question['Correct Option'];\n      const subtopic = question.Subtopic;\n      const subtopicDetail = question['Subtopic Detail'];\n      const difficulty = ((_question$Difficulty = question.Difficulty) === null || _question$Difficulty === void 0 ? void 0 : _question$Difficulty.toLowerCase()) || 'e';\n\n      // Determine points based on difficulty\n      let points = 1;\n      if (difficulty === 'm') points = 2;\n      if (difficulty === 'h') points = 3;\n\n      // Update difficulty counters\n      if (difficulty === 'e') results.totalByDifficulty.easy += 1;else if (difficulty === 'm') results.totalByDifficulty.medium += 1;else if (difficulty === 'h') results.totalByDifficulty.hard += 1;\n      results.totalScore += points;\n\n      // Find the correct option letter by checking which option matches the correct answer text\n      const correctAnswer = (_Object$entries$find = Object.entries(question).find(([key, value]) => key.startsWith('Option') && value.trim() === correctAnswerText.trim())) === null || _Object$entries$find === void 0 ? void 0 : (_Object$entries$find$ = _Object$entries$find[0]) === null || _Object$entries$find$ === void 0 ? void 0 : _Object$entries$find$.split(' ')[1]; // Extract 'A', 'B', 'C', or 'D'\n\n      // Check if answer is correct\n      if (userAnswer && userAnswer === correctAnswer.charAt(0)) {\n        results.score += points;\n\n        // Track difficulty stats for correct answers\n        if (difficulty === 'e') results.difficultyStats.easy += 1;else if (difficulty === 'm') results.difficultyStats.medium += 1;else if (difficulty === 'h') results.difficultyStats.hard += 1;\n\n        // Track strong topics\n        if (!results.strongTopics[subtopic]) {\n          results.strongTopics[subtopic] = [];\n        }\n        if (!results.strongTopics[subtopic].includes(subtopicDetail)) {\n          results.strongTopics[subtopic].push(subtopicDetail);\n        }\n      } else {\n        // Track wrong questions\n        results.wrongQuestions.push({\n          question: question.Question,\n          correctAnswer,\n          userAnswer: userAnswer || 'No answer',\n          subtopic,\n          subtopicDetail\n        });\n\n        // Track weak topics\n        if (!results.weakTopics[subtopic]) {\n          results.weakTopics[subtopic] = [];\n        }\n        if (!results.weakTopics[subtopic].includes(subtopicDetail)) {\n          results.weakTopics[subtopic].push(subtopicDetail);\n        }\n      }\n    });\n\n    // Convert topic objects to arrays for database storage\n    const strongTopicsArray = Object.entries(results.strongTopics).map(([topic, details]) => ({\n      topic,\n      details\n    }));\n    const weakTopicsArray = Object.entries(results.weakTopics).map(([topic, details]) => ({\n      topic,\n      details\n    }));\n    return {\n      ...results,\n      strongTopics: strongTopicsArray,\n      weakTopics: weakTopicsArray,\n      percentScore: results.score / results.totalScore * 100\n    };\n  }, [questions, userAnswers]);\n\n  // End the test and submit results\n  const handleEndTest = async (isAutoSubmit = false) => {\n    setTestCompleted(true);\n    const results = calculateResults();\n    setAnalytics(results);\n    try {\n      // Send results to backend\n      const response = await fetch('http://localhost:5000/submit_test_results', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: userEmail,\n          chapter: chapter,\n          score: results.score,\n          totalScore: results.totalScore,\n          percentScore: results.percentScore,\n          strongTopics: results.strongTopics,\n          weakTopics: results.weakTopics,\n          wrongQuestions: results.wrongQuestions,\n          difficultyStats: results.difficultyStats\n        })\n      });\n      const data = await response.json();\n      if (data.success) {\n        // Store results in localStorage for analytics page\n        localStorage.setItem('testResults', JSON.stringify(results));\n\n        // Navigate to results page\n        navigate('/test-results');\n      } else {\n        console.error('Failed to submit test results:', data.message);\n        alert('Test completed, but there was an issue saving your results. ' + (isAutoSubmit ? 'Time expired. ' : '') + 'Please contact support.');\n\n        // Still navigate to results page even if there was an error\n        navigate('/test-results');\n      }\n    } catch (error) {\n      console.error('Error submitting test results:', error);\n      alert('Test completed, but there was an issue saving your results. ' + (isAutoSubmit ? 'Time expired. ' : '') + 'Please contact support.');\n\n      // Still navigate to results even if there was an error\n      navigate('/test-results');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-white text-xl\",\n        children: \"Loading test questions...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, this);\n  }\n  const currentQuestion = questions[currentQuestionIndex];\n  const options = ['A', 'B', 'C', 'D'];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto bg-white bg-opacity-20 rounded-lg p-4 mb-4 flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Clock, {\n          className: \"h-5 w-5 mr-2 text-white\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-white font-bold\",\n          children: formatTime(timeLeft)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-white\",\n        children: [\"Question \", currentQuestionIndex + 1, \" of \", questions.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto bg-white rounded-lg shadow-lg p-6 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-bold mb-6\",\n        children: currentQuestion === null || currentQuestion === void 0 ? void 0 : currentQuestion.Question\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: options.map((option, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `w-full text-left p-4 rounded-lg border transition-colors ${selectedOption === option ? 'bg-blue-100 border-blue-500' : 'bg-white border-gray-300 hover:bg-gray-50'}`,\n          onClick: () => handleOptionSelect(option),\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium mr-2\",\n            children: [option, \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this), currentQuestion === null || currentQuestion === void 0 ? void 0 : currentQuestion[`Option ${option}`]]\n        }, option, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto flex justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg flex items-center\",\n        onClick: handleNextQuestion,\n        children: currentQuestionIndex < questions.length - 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\"Next \", /*#__PURE__*/_jsxDEV(ChevronRight, {\n            className: \"ml-1 h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 20\n          }, this)]\n        }, void 0, true) : 'Finish Test'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 7\n    }, this), showConfirmEndModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 max-w-md w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold mb-4 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"h-6 w-6 text-yellow-500 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 15\n          }, this), \"End Test Confirmation\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-6\",\n          children: [\"Are you sure you want to end the test? You have answered \", userAnswers.filter(a => a !== null).length, \" out of \", questions.length, \" questions.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\",\n            onClick: () => setShowConfirmEndModal(false),\n            children: \"Continue Test\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\",\n            onClick: () => {\n              setShowConfirmEndModal(false);\n              handleEndTest();\n            },\n            children: \"End Test\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 278,\n    columnNumber: 5\n  }, this);\n};\n_s(TakeTest, \"wNeZjYFcoJ0U2jbwZNb+uCsuhX8=\", false, function () {\n  return [useNavigate];\n});\n_c = TakeTest;\nexport default TakeTest;\nvar _c;\n$RefreshReg$(_c, \"TakeTest\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","AlertCircle","ChevronRight","Clock","CheckCircle","Papa","jsxDEV","_jsxDEV","Fragment","_Fragment","TakeTest","_s","navigate","chapter","localStorage","getItem","userEmail","questions","setQuestions","currentQuestionIndex","setCurrentQuestionIndex","selectedOption","setSelectedOption","timeLeft","setTimeLeft","loading","setLoading","showConfirmEndModal","setShowConfirmEndModal","userAnswers","setUserAnswers","testCompleted","setTestCompleted","analytics","setAnalytics","score","totalScore","wrongQuestions","strongTopics","weakTopics","difficultyStats","easy","medium","hard","totalByDifficulty","formatTime","seconds","mins","Math","floor","secs","toString","padStart","loadQuestions","response","fetch","ok","Error","status","csvText","text","console","log","parse","header","complete","results","shuffledQuestions","data","filter","q","Question","trim","sort","random","Array","length","fill","error","alert","timer","setInterval","prev","clearInterval","handleEndTest","handleOptionSelect","option","newAnswers","handleNextQuestion","prevIndex","calculateResults","forEach","question","index","_question$Difficulty","_Object$entries$find","_Object$entries$find$","userAnswer","correctAnswerText","subtopic","Subtopic","subtopicDetail","difficulty","Difficulty","toLowerCase","points","correctAnswer","Object","entries","find","key","value","startsWith","split","charAt","includes","push","strongTopicsArray","map","topic","details","weakTopicsArray","percentScore","isAutoSubmit","method","headers","body","JSON","stringify","email","json","success","setItem","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","currentQuestion","options","onClick","a","_c","$RefreshReg$"],"sources":["/home/pes2ug22cs632/gen_ai/App/src/takeTest.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { AlertCircle, ChevronRight, Clock, CheckCircle } from 'lucide-react';\nimport Papa from 'papaparse';\n\nconst TakeTest = () => {\n  const navigate = useNavigate();\n  const chapter = localStorage.getItem('currentChapter');\n  const userEmail = localStorage.getItem('userEmail');\n\n  // State management\n  const [questions, setQuestions] = useState([]);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [selectedOption, setSelectedOption] = useState('');\n  const [timeLeft, setTimeLeft] = useState(60 * 60); // 60 minutes in seconds\n  const [loading, setLoading] = useState(true);\n  const [showConfirmEndModal, setShowConfirmEndModal] = useState(false);\n  const [userAnswers, setUserAnswers] = useState([]);\n  const [testCompleted, setTestCompleted] = useState(false);\n  const [analytics, setAnalytics] = useState({\n    score: 0,\n    totalScore: 0,\n    wrongQuestions: [],\n    strongTopics: [],\n    weakTopics: [],\n    difficultyStats: { easy: 0, medium: 0, hard: 0 },\n    totalByDifficulty: { easy: 0, medium: 0, hard: 0 }\n  });\n\n  // Format time as MM:SS\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // Load questions from CSV\n  useEffect(() => {\n    const loadQuestions = async () => {\n      try {\n        // http://localhost:5000/static/generated_tests/output_${chapter}.csv\n        // const response = await fetch(`http://localhost:5000/serve`);\n\n        const response = await fetch(`http://localhost:5000/serve?filename=output_${chapter}.csv`);\n          \n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }  \n        const csvText = await response.text();\n        console.log(`Attempting to fetch: http://localhost:5000/serve?filename=output_${chapter}.csv`);\n        \n        Papa.parse(csvText, {\n          header: true,\n          complete: (results) => {\n            // Shuffle questions for random order\n            const shuffledQuestions = results.data\n              .filter(q => q.Question && q.Question.trim() !== '') // Filter out empty questions\n              .sort(() => Math.random() - 0.5);\n            \n            setQuestions(shuffledQuestions);\n            setUserAnswers(new Array(shuffledQuestions.length).fill(null));\n            setLoading(false);\n          },\n          error: (error) => {\n            console.error('Error parsing CSV:', error);\n            alert('Failed to load test questions. Please try again.');\n            navigate('/');\n          }\n        });\n      } catch (error) {\n        console.error('Error loading questions:', error);\n        alert('Failed to load test questions. Please try again.');\n        navigate('/');\n      }\n    };\n\n    if (chapter) {\n      loadQuestions();\n    } else {\n      alert('Missing chapter information');\n      navigate('/');\n    }\n  }, [chapter, navigate]);\n\n  // Timer logic\n  useEffect(() => {\n    if (loading || testCompleted) return;\n\n    const timer = setInterval(() => {\n      setTimeLeft(prev => {\n        if (prev <= 1) {\n          clearInterval(timer);\n          handleEndTest(true); // Auto-submit when time runs out\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [loading, testCompleted]);\n\n  // Handle answer selection\n  const handleOptionSelect = (option) => {\n    setSelectedOption(option);\n    \n    // Update user answers array\n    const newAnswers = [...userAnswers];\n    newAnswers[currentQuestionIndex] = option;\n    setUserAnswers(newAnswers);\n  };\n\n  // Go to the next question\n  const handleNextQuestion = () => {\n    if (currentQuestionIndex < questions.length - 1) {\n      setCurrentQuestionIndex(prevIndex => prevIndex + 1);\n      setSelectedOption(userAnswers[currentQuestionIndex + 1] || '');\n    } else {\n      setShowConfirmEndModal(true);\n    }\n  };\n\n  // Calculate test results\n  const calculateResults = useCallback(() => {\n    const results = {\n      score: 0,\n      totalScore: 0,\n      wrongQuestions: [],\n      strongTopics: {},\n      weakTopics: {},\n      difficultyStats: { easy: 0, medium: 0, hard: 0 },\n      totalByDifficulty: { easy: 0, medium: 0, hard: 0 }\n    };\n\n    questions.forEach((question, index) => {\n      const userAnswer = userAnswers[index];\n      const correctAnswerText = question['Correct Option'];\n      const subtopic = question.Subtopic;\n      const subtopicDetail = question['Subtopic Detail'];\n      const difficulty = question.Difficulty?.toLowerCase() || 'e';\n      \n      // Determine points based on difficulty\n      let points = 1;\n      if (difficulty === 'm') points = 2;\n      if (difficulty === 'h') points = 3;\n      \n      // Update difficulty counters\n      if (difficulty === 'e') results.totalByDifficulty.easy += 1;\n      else if (difficulty === 'm') results.totalByDifficulty.medium += 1;\n      else if (difficulty === 'h') results.totalByDifficulty.hard += 1;\n      \n      results.totalScore += points;\n\n      // Find the correct option letter by checking which option matches the correct answer text\nconst correctAnswer = Object.entries(question).find(([key, value]) =>\n  key.startsWith('Option') && value.trim() === correctAnswerText.trim()\n)?.[0]?.split(' ')[1]; // Extract 'A', 'B', 'C', or 'D'\n      \n      // Check if answer is correct\n      if (userAnswer && userAnswer === correctAnswer.charAt(0)) {\n        results.score += points;\n        \n        // Track difficulty stats for correct answers\n        if (difficulty === 'e') results.difficultyStats.easy += 1;\n        else if (difficulty === 'm') results.difficultyStats.medium += 1;\n        else if (difficulty === 'h') results.difficultyStats.hard += 1;\n        \n        // Track strong topics\n        if (!results.strongTopics[subtopic]) {\n          results.strongTopics[subtopic] = [];\n        }\n        if (!results.strongTopics[subtopic].includes(subtopicDetail)) {\n          results.strongTopics[subtopic].push(subtopicDetail);\n        }\n      } else {\n        // Track wrong questions\n        results.wrongQuestions.push({\n          question: question.Question,\n          correctAnswer,\n          userAnswer: userAnswer || 'No answer',\n          subtopic,\n          subtopicDetail\n        });\n        \n        // Track weak topics\n        if (!results.weakTopics[subtopic]) {\n          results.weakTopics[subtopic] = [];\n        }\n        if (!results.weakTopics[subtopic].includes(subtopicDetail)) {\n          results.weakTopics[subtopic].push(subtopicDetail);\n        }\n      }\n    });\n    \n    // Convert topic objects to arrays for database storage\n    const strongTopicsArray = Object.entries(results.strongTopics).map(([topic, details]) => ({\n      topic,\n      details\n    }));\n    \n    const weakTopicsArray = Object.entries(results.weakTopics).map(([topic, details]) => ({\n      topic,\n      details\n    }));\n    \n    return {\n      ...results,\n      strongTopics: strongTopicsArray,\n      weakTopics: weakTopicsArray,\n      percentScore: (results.score / results.totalScore) * 100\n    };\n  }, [questions, userAnswers]);\n\n  // End the test and submit results\n  const handleEndTest = async (isAutoSubmit = false) => {\n    setTestCompleted(true);\n    const results = calculateResults();\n    setAnalytics(results);\n    \n    try {\n      // Send results to backend\n      const response = await fetch('http://localhost:5000/submit_test_results', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          email: userEmail,\n          chapter: chapter,\n          score: results.score,\n          totalScore: results.totalScore,\n          percentScore: results.percentScore,\n          strongTopics: results.strongTopics,\n          weakTopics: results.weakTopics,\n          wrongQuestions: results.wrongQuestions,\n          difficultyStats: results.difficultyStats\n        }),\n      });\n      \n      const data = await response.json();\n      \n      if (data.success) {\n        // Store results in localStorage for analytics page\n        localStorage.setItem('testResults', JSON.stringify(results));\n        \n        // Navigate to results page\n        navigate('/test-results');\n      } else {\n        console.error('Failed to submit test results:', data.message);\n        alert('Test completed, but there was an issue saving your results. ' + \n              (isAutoSubmit ? 'Time expired. ' : '') +\n              'Please contact support.');\n        \n        // Still navigate to results page even if there was an error\n        navigate('/test-results');\n      }\n    } catch (error) {\n      console.error('Error submitting test results:', error);\n      alert('Test completed, but there was an issue saving your results. ' + \n            (isAutoSubmit ? 'Time expired. ' : '') +\n            'Please contact support.');\n      \n      // Still navigate to results even if there was an error\n      navigate('/test-results');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600\">\n        <div className=\"text-white text-xl\">Loading test questions...</div>\n      </div>\n    );\n  }\n\n  const currentQuestion = questions[currentQuestionIndex];\n  const options = ['A', 'B', 'C', 'D'];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 p-4\">\n      {/* Timer and Progress Bar */}\n      <div className=\"max-w-3xl mx-auto bg-white bg-opacity-20 rounded-lg p-4 mb-4 flex justify-between items-center\">\n        <div className=\"flex items-center\">\n          <Clock className=\"h-5 w-5 mr-2 text-white\" />\n          <span className=\"text-white font-bold\">{formatTime(timeLeft)}</span>\n        </div>\n        <div className=\"text-white\">\n          Question {currentQuestionIndex + 1} of {questions.length}\n        </div>\n      </div>\n      \n      {/* Question Card */}\n      <div className=\"max-w-3xl mx-auto bg-white rounded-lg shadow-lg p-6 mb-6\">\n        <h3 className=\"text-xl font-bold mb-6\">{currentQuestion?.Question}</h3>\n        \n        <div className=\"space-y-4\">\n          {options.map((option, index) => (\n            <button\n              key={option}\n              className={`w-full text-left p-4 rounded-lg border transition-colors ${\n                selectedOption === option\n                  ? 'bg-blue-100 border-blue-500'\n                  : 'bg-white border-gray-300 hover:bg-gray-50'\n              }`}\n              onClick={() => handleOptionSelect(option)}\n            >\n              <span className=\"font-medium mr-2\">{option}.</span>\n              {currentQuestion?.[`Option ${option}`]}\n            </button>\n          ))}\n        </div>\n      </div>\n      \n      {/* Navigation */}\n      <div className=\"max-w-3xl mx-auto flex justify-between\">\n        <div></div> {/* Empty div for spacing */}\n        <button\n          className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg flex items-center\"\n          onClick={handleNextQuestion}\n        >\n          {currentQuestionIndex < questions.length - 1 ? (\n            <>\n              Next <ChevronRight className=\"ml-1 h-5 w-5\" />\n            </>\n          ) : (\n            'Finish Test'\n          )}\n        </button>\n      </div>\n      \n      {/* Confirmation Modal */}\n      {showConfirmEndModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full\">\n            <h3 className=\"text-xl font-bold mb-4 flex items-center\">\n              <AlertCircle className=\"h-6 w-6 text-yellow-500 mr-2\" />\n              End Test Confirmation\n            </h3>\n            <p className=\"mb-6\">\n              Are you sure you want to end the test? You have answered {userAnswers.filter(a => a !== null).length} out of {questions.length} questions.\n            </p>\n            <div className=\"flex justify-end space-x-4\">\n              <button\n                className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\n                onClick={() => setShowConfirmEndModal(false)}\n              >\n                Continue Test\n              </button>\n              <button\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n                onClick={() => {\n                  setShowConfirmEndModal(false);\n                  handleEndTest();\n                }}\n              >\n                End Test\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TakeTest;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}